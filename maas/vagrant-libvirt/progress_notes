19 Dec

very good progress
- os images now imported
- machine is picked by maas -> network approx ok?
- virsh functional from the maas node (can list host domains with `virsh -c qemu+ssh://mdelapierre@192.168.1.23/system list --all`)
blocker
- machine crashes at various stages during commissioning&co

earlier today, I had a very progressed test, which arrived up to loading the ephemeral image and so on
I am unsure of the exact setup of this working case

in subsequent tests, the process crashes earlier (bmc and others)

last thing I was testing was a combo of:
- host shell: `vagrant up node01`
##- maas node shell: `maas admin machines create             architecture="amd64/generic"             mac_addresses="0e:00:00:00:00:01"             hostname=node01             power_type=virsh power_parameters='{"power_address": "qemu+ssh://mdelapierre@192.168.1.23/system", "power_id": "node01"}'`
```
MACHINE=<from UI>
sysid=$(maas admin machines read hostname=$MACHINE | jq -r '(.[] | .system_id)')
uuid=$(virsh -c qemu+ssh://mdelapierre@192.168.1.23/system dominfo node01 |grep UUID | awk '{print $2}'
maas admin machine update $sysid power_type=virsh power_parameters='{"power_address": "qemu+ssh://mdelapierre@192.168.1.23/system", "power_id": "'$uuid'"}'
```

not working, but just to note down where I am

note that when the machine is started by automatic pxe pickup, maas does not know it is a Virsh power type..

issues I can think of:
- virsh not working/setup properly (test full virsh/virt-install cycle from maas machine?)
- maas setup for virsh not correct
- maas network setup
- more subtle errors that cause erratic problems
ideas:
- less network and libvirt options?? (auto, mgmt,..)
- search web for more info on what maas does when it finds a new node up
- search web for more info on virsh+maas
- review maas-sandbox files, align more with it
- e.g. remove virsh vm-hosts (not in maas-sandbox)
- would a vm-host setup work?? (lxd is handier, but might help to understand)
